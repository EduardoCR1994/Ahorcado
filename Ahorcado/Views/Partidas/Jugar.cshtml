@{
    ViewBag.Title = "Juego del Ahorcado";
    var progreso = ViewBag.PalabraProgreso as string;
    var letrasUsadas = ViewBag.LetrasUsadas as List<string>;
    var resultado = ViewBag.Resultado as string;
    var partidaID = (int)ViewBag.PartidaID;
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<div class="container mt-4">
    <div class="card bg-dark text-white shadow-lg p-4">
        <h2 class="text-center mb-4"><i class="fas fa-skull-crossbones"></i> Juego del Ahorcado</h2>

        <h4 class="text-center mb-3">
            <span class="text-warning" style="letter-spacing:12px; font-size:30px;">@progreso</span>
        </h4>

        <p class="text-center fs-5">
            <strong>💥 Intentos restantes:</strong> <span class="badge bg-danger">@ViewBag.IntentosRestantes</span>
        </p>

        @if (!string.IsNullOrEmpty(resultado))
        {
            <div class="text-center mt-3">
                <h3 class="fw-bold" style="color:@(resultado == "Ganada" ? "limegreen" : "red")">
                    🎉 Resultado: @resultado
                </h3>
                <a href="@Url.Action("Crear", "Partidas")" class="btn btn-success mt-3">
                    <i class="fas fa-redo"></i> Nueva Partida
                </a>
            </div>
        }
        else
        {
            <form method="post" action="@Url.Action("IntentarLetra", "Partidas")" class="text-center mt-4">
                <input type="hidden" name="idPartida" value="@partidaID" />

                <div class="d-flex flex-wrap justify-content-center gap-2">
                    @foreach (var letra in ViewBag.TodasLetras)
                    {
                        bool usada = letrasUsadas.Contains(letra);
                        <button type="submit" name="letra" value="@letra"
                                class="btn btn-sm fw-bold @(usada ? "btn-secondary" : "btn-outline-light")"
                                @(usada ? "disabled" : "")>
                            @letra
                        </button>
                    }
                </div>
            </form>
        }
    </div>
</div>

